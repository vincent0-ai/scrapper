{% extends 'base.html' %}

{% block title %}Lyrics for {{ result.title }}{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header d-flex justify-content-between align-items-start">
        <div>
            <h3>{{ result.title }}</h3>
            {% if result.artist %}
                <p class="text-muted">{{ result.artist }}</p>
            {% endif %}
            <small>Source: {{ result.source }}</small>
        </div>
        <div>
            <button class="btn btn-sm btn-outline-warning favorite-btn" 
                    data-type="lyrics" 
                    data-item-id="{{ result.query }}" 
                    data-title="{{ result.title }} - {{ result.artist }}"
                    style="{% if result.is_favorite %}display: none;{% endif %}">
                ☆ Add to Favorites
            </button>
            <button class="btn btn-sm btn-warning favorite-btn-remove" 
                    data-type="lyrics" 
                    data-item-id="{{ result.query }}"
                    style="{% if not result.is_favorite %}display: none;{% endif %}">
                ★ Remove from Favorites
            </button>
        </div>
    </div>
    <div class="card-body">
        <pre id="lyrics-text">{{ result.lyrics }}</pre>
    </div>
    <div class="card-footer">
        <button id="copy-lyrics-btn" class="btn btn-info">Copy Lyrics</button>
        <form action="/download_lyrics" method="post" style="display: inline;">
            <input type="hidden" name="title" value="{{ result.title }}">
            <input type="hidden" name="lyrics" value="{{ result.lyrics }}">
            <button type="submit" class="btn btn-success">Download .txt</button>
        </form>
    </div>
</div>
{% endblock %}